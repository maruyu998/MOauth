<svg xmlns="http://www.w3.org/2000/svg" width="951.0234375px" height="841.375px" class="sequence simple"><desc>moauth flow /signin</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"/></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"/></marker></defs><g class="title"><rect x="10" y="10" width="169.609375" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="15" y="28.203125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">moauth flow /signin</tspan></text></g><g class="actor"><rect x="76.3984375" y="45.609375" width="78.8125" height="35.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="86.3984375" y="68.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="86.3984375">Browser</tspan></text></g><g class="actor"><rect x="76.3984375" y="785.765625" width="78.8125" height="35.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="86.3984375" y="808.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="86.3984375">Browser</tspan></text></g><line x1="115.8046875" x2="115.8046875" y1="81.21875" y2="785.765625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="646.6171875" y="45.609375" width="104" height="35.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="656.6171875" y="68.8125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="656.6171875">AuthServer</tspan></text></g><g class="actor"><rect x="646.6171875" y="785.765625" width="104" height="35.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="656.6171875" y="808.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="656.6171875">AuthServer</tspan></text></g><line x1="698.6171875" x2="698.6171875" y1="81.21875" y2="785.765625" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="signal"><text x="327.40625" y="111.6171875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="327.40625">access /signin page</tspan></text><line x1="115.8046875" x2="698.6171875" y1="116.828125" y2="116.828125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="571.8125" y="136.828125" width="253.609375" height="64.015625" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="576.8125" y="155.03125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="576.8125">get the requested page</tspan><tspan dy="1.2em" x="576.8125">when access_token and user_id</tspan><tspan dy="1.2em" x="576.8125">are saved in the session</tspan></text></g><g class="signal"><text x="306.40625" y="231.2421875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="306.40625">(get the requested page)</tspan></text><line x1="698.6171875" x2="115.8046875" y1="236.453125" y2="236.453125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowOpen&quot;);"/></g><g class="note"><rect x="618.015625" y="256.453125" width="161.203125" height="44.8125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="623.015625" y="274.65625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="623.015625">save requested uri</tspan><tspan dy="1.2em" x="623.015625">to session</tspan></text></g><g class="note"><rect x="550.8125" y="321.265625" width="295.609375" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="555.8125" y="339.46875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="555.8125">validate self(app_id &amp; app_secret)</tspan></text></g><g class="note"><rect x="630.6171875" y="366.875" width="136" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="635.6171875" y="385.078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="635.6171875">issue app_token</tspan></text></g><g class="signal"><text x="230.8046875" y="422.8828125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="230.8046875">[REDIRECT:{AUTH_URI}/signin?app_token=***]</tspan></text><line x1="698.6171875" x2="115.8046875" y1="428.09375" y2="428.09375" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowOpen&quot;);"/></g><g class="note"><rect x="10" y="448.09375" width="211.609375" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="15" y="466.296875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">enter user_id &amp; password</tspan></text></g><g class="signal"><text x="125.8046875" y="504.1015625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="125.8046875">[POST:{AUTH_URI}/api/get_access_token] app_token, user_id, password</tspan></text><line x1="115.8046875" x2="698.6171875" y1="509.3125" y2="509.3125" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="538.2109375" y="529.3125" width="320.8125" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="543.2109375" y="547.515625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="543.2109375">validate app_token, user_id, password</tspan></text></g><g class="note"><rect x="618.015625" y="574.921875" width="161.203125" height="25.609375" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="623.015625" y="593.125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="623.015625">issue access_token</tspan></text></g><g class="note"><rect x="571.8125" y="620.53125" width="253.609375" height="44.8125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="576.8125" y="638.734375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="576.8125">save user_id and access_token</tspan><tspan dy="1.2em" x="576.8125">to session</tspan></text></g><g class="note"><rect x="605.4140625" y="685.34375" width="186.40625" height="44.8125" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="610.4140625" y="703.546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="610.4140625">restore requested uri</tspan><tspan dy="1.2em" x="610.4140625">from session</tspan></text></g><g class="signal"><text x="268.609375" y="760.5546875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="268.609375">[REDIRECT] get the requested page</tspan></text><line x1="698.6171875" x2="115.8046875" y1="765.765625" y2="765.765625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g></svg>